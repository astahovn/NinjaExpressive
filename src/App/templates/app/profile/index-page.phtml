<?php
/** @var array $profile */
/** @var array $conversations */
?>

<?php $this->layout('layout::profile', ['title' => 'Profile']) ?>

<div class="row">
    <div class="col-sm-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <a href="/profile/edit" class="float-right">Edit</a>
                Profile
            </div>
            <div class="panel-body" id="profile-status-widget"></div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <a href="/conversation/create" class="float-right">Create</a>
                Conversations
            </div>
            <div class="panel-body" id="profile-conversations-widget"></div>
        </div>
    </div>
</div>

<?php $this->start('javascript') ?>
<script language="JavaScript">
    ReactDOM.render(
        React.createElement(ProfileStatusWidget, {nick: '<?= $profile['nick'] ?>', hasOpenKey: '<?= $profile['has_open_key'] ?>'}, null),
        document.getElementById('profile-status-widget')
    );
    ReactDOM.render(
        React.createElement(ConversationsWidget, {conversations: '<?= json_encode($conversations) ?>'}, null),
        document.getElementById('profile-conversations-widget')
    );
</script>
<?php $this->stop() ?>